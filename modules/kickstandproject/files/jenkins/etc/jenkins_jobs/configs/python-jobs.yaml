# This file is generated by Puppet
#  DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
#
- job-template:
    name: 'gate-{name}-coverage'

    builders:
      - gerrit-git-prep
      - coverage

    node: '{node}'


- job-template:
    name: 'gate-{name}-pep8'

    builders:
      - gerrit-git-prep
      - pep8

    publishers:
      - pep8

    node: '{node}'


- job-template:
    name: 'gate-{name}-python27'

    parameters:
      - label:
          name: NODE_LABEL
          description: Label of node to use for this build
          default: '{node}'

    builders:
      - gerrit-git-prep
      - python27

    node: '{node}'


- job-template:
    name: 'gate-{name}-docs'

    builders:
      - gerrit-git-prep
      - docs

    node: '{node}'


- job-template:
    name: '{name}-tarball'
    node: precise

    builders:
      - gerrit-git-prep
      - tarball:
          project: '{name}'

    publishers:
      - tarball:
          project: '{name}'
          site: '{tarball-site}'


- job-template:
    name: '{name}-branch-tarball'
    concurrent: false
    node: precise

    builders:
      - gerrit-git-prep
      - tarball:
          github-org: '{github-org}'
          project: '{name}'
      - shell: |
          #!/bin/bash -xe
          BRANCH=$ZUUL_REFNAME
          BRANCH_PATH=`echo $BRANCH | tr / -`
          mv dist/* dist/{name}-$BRANCH_PATH.tar.gz

    publishers:
      - tarball:
          project: '{name}'
          site: '{tarball-site}'


- job-group:
    name: python-jobs
    jobs:
      - 'gate-{name}-coverage'
      - 'gate-{name}-pep8'
      - 'gate-{name}-python27'
      - 'gate-{name}-docs'
      - '{name}-tarball'
      - '{name}-branch-tarball'
